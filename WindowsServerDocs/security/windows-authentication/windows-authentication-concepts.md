---
title: Windows 身份验证概念
description: Windows Server 安全
ms.topic: article
ms.assetid: 29d1db15-cae0-4e3d-9d8e-241ac206bb8b
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 10/12/2016
ms.openlocfilehash: 5772a2dd56c60d1c5ce037181940f0593cede12f
ms.sourcegitcommit: db2d46842c68813d043738d6523f13d8454fc972
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/10/2020
ms.locfileid: "89638703"
---
# <a name="windows-authentication-concepts"></a>Windows 身份验证概念

>适用于：Windows Server（半年频道）、Windows Server 2016

本参考概述主题介绍了 Windows 身份验证所基于的概念。

身份验证是验证对象或人员身份的过程。 当你对某个对象进行身份验证时，目的就在于验证该对象是否为正版。 当你对某个用户进行身份验证时，其目标是验证该用户是否不是冒名顶替者。

在网络环境中，身份验证是指证明网络应用程序或资源的身份的动作。 通常情况下，使用密钥仅用户知道 (与公钥加密) 或共享密钥的加密操作来证明标识。 身份验证交换的服务器端会将签名数据和已知的加密密钥相比较来验证身份验证尝试。

将加密密钥存储在安全的中心位置中可以确保身份验证过程可伸缩且可维护。 Active Directory 是用于存储标识信息的推荐和默认技术，其中包括用户的凭据的加密密钥。 Active Directory 是默认 NTLM 和 Kerberos 实现所必需的。

身份验证技术包括从简单的登录到操作系统或登录到服务或应用程序，这些方法可根据用户所知道的内容（例如密码）将用户标识为使用用户 has'such 为令牌、公钥证书、图片或生物特性的内容的更强大安全机制。 在业务环境中，用户可能会在一个位置或多个位置访问多个服务器上的多个应用程序。 鉴于这些原因，身份验证必须支持其他平台和其他 Windows 操作系统的环境。

## <a name="authentication-and-authorization-a-travel-analogy"></a>身份验证和授权：旅游类比
旅游类比有助于说明身份验证的工作原理。 通常需要执行一些准备任务来开始旅程。 旅行必须向其主机颁发机构证明其真实身份。 这种证明形式可以是 "公民证明"、"出生地"、"个人" 凭证、照片，或者是该国家/地区的法律所要求的内容。 通过颁发 passport 来验证出差的标识，它类似于组织颁发和管理的系统帐户-安全主体。 Passport 和预期目标基于政府机构颁发的一组规则和规章。

**旅程**

当旅行进入国际边框时，会有一种边框防护要求提供凭据，而出差会提供其 passport。 此过程分为两折：

-   此防护通过验证 passport 是否是由本地政府信任 (信任的安全机构颁发的，至少是在颁发护照) 并验证是否未修改 passport。

-   通过验证面部是否与 passport 上所述人员的人脸相符，并且其他所需的凭据是正确的，防护机制对出差进行身份验证。

如果 passport 证实有效并且出差人员证实成为其所有者，则身份验证将成功，并且可以允许出差时跨边界进行访问。

安全机构之间的可传递信任是身份验证的基础;在国际边框进行的身份验证类型基于信任。 本地政府不知道出差，但它相信主机政府确实会这样做。 当主机政府颁发 passport 时，它并不知道这些操作。 它信任颁发了出生证书的机构或其他文档。 颁发该出生证书的机构反过来也信任签署证书的医师。 医生观察到了旅行的出生，并通过标识的直接证明来标记证书，在这种情况下，新生儿的占用空间。 通过受信任中介以这种方式传输的信任是可传递的。

可传递信任是 Windows 客户端/服务器体系结构中网络安全的基础。 信任关系在一组域（如域树）中流动，并形成域与信任该域的所有域之间的关系。 例如，如果域 A 具有域 B 的可传递信任，并且域 B 信任域 C，则域 A 信任域 C。

身份验证和授权之间存在差异。 对于身份验证，系统会证明你是你说的。 在授权下，系统会验证您是否有权执行您想要执行的操作。 若要将边框与下一步相类比，只需验证出差是有效 passport 的适当所有者，而不一定是授权出差人员输入国家/地区。 仅在所输入的国家/地区的居民为输入国家/地区的所有公民授予无限制权限的情况下，才允许特定国家/地区的居民输入其他国家/地区。

同样，你可以向所有用户授予某个域的权限以访问资源。 属于该域的任何用户都有权访问该资源，正如加拿大，美国公民进入加拿大。 然而，尝试输入巴西或印度的美国公民发现，他们无法通过提供 passport 来输入这些国家，因为这两个国家都需要访问美国公民才能获得有效的签证。 因此，身份验证不能保证对资源的访问权限，也不能授权使用资源。

## <a name="credentials"></a>凭据
Passport 和可能关联的 visas 是用于出差的已接受凭据。 但是，这些凭据可能不允许出差人员输入或访问国家/地区内的所有资源。 例如，参加会议需要其他凭据。 在 Windows 中，可以对凭据进行管理，使帐户持有者可以通过网络访问资源，而无需反复提供凭据。 这种类型的访问权限允许用户一次对用户进行身份验证，以访问他们有权使用的所有应用程序和数据源，而无需输入其他帐户标识符或密码。 Windows 平台通过在操作系统的本地安全机构 (LSA) 中以本地方式缓存用户凭据，从而使使用单个用户标识 (通过网络 Active Directory) 维护的能力。 当用户登录到域时，Windows 身份验证包在对网络资源的凭据进行身份验证时，透明地使用凭据来提供单一登录。 有关凭据的详细信息，请参阅 [Windows 身份验证中的凭据处理](credentials-processes-in-windows-authentication.md)。

用于出差的多重身份验证形式可能要求携带和提供多个文档来对其身份进行身份验证，例如 passport 和会议注册信息。 Windows 通过智能卡、虚拟智能卡和生物识别技术实现此窗体或身份验证。

## <a name="security-principals-and-accounts"></a>安全主体和帐户
在 Windows 中，可以启动操作的任何用户、服务、组或计算机都是安全主体。 安全主体具有可在计算机本地或基于域的帐户。 例如，即使没有人为用户登录，Windows 客户端加入域的计算机也可以通过与域控制器通信来加入网络域。 若要启动通信，计算机必须在域中具有活动帐户。 在接受来自计算机的通信之前，域控制器上的本地安全机构会对计算机的标识进行身份验证，然后定义计算机的安全上下文，就像对安全主体而言。 此安全上下文定义特定计算机或网络上的用户、服务、组或计算机上的用户或服务的标识和功能。 例如，它定义了可以访问的资源（例如文件共享或打印机）以及可以由用户、服务或该资源上的计算机执行的操作，如读取、写入或修改。 有关详细信息，请参阅 [安全主体](/windows/security/identity-protection/access-control/security-principals)。

帐户是一种标识 claimant 的方式，即用户或服务请求的访问权限或资源。 持有真实 passport 的旅行拥有主机所在国家/地区的帐户。 用户、用户组、对象和服务都可以有个人帐户或共享帐户。 帐户可以是组的成员，并且可以分配有特定权限和权限。 帐户可以限制为本地计算机、工作组、网络，或分配给域的成员身份。

在每个版本的 Windows 上定义内置帐户和它们所属的安全组。 通过使用安全组，你可以将相同的安全权限分配给已成功通过身份验证的多个用户，这将简化访问管理。 颁发护照的规则可能要求将出差分配给某些组，例如 business、旅游或政府。 此过程可确保在组的所有成员中保持一致的安全权限。 通过使用安全组分配权限意味着对资源的访问控制保持不变，并且易于管理和审核。 根据需要添加和删除需要从适当安全组访问权限的用户，你可以最大程度地降低 (Acl) 的访问控制列表更改频率。

Windows Server 2008 R2 和 Windows 7 中引入了独立托管服务帐户和虚拟帐户，以提供必需的应用程序，如 Microsoft Exchange Server 和 Internet Information Services (IIS) ，并隔离其自己的域帐户，同时无需管理员手动管理这些帐户的服务主体名称 (SPN) 和凭据。 组托管服务帐户是在 Windows Server 2012 中引入的，它在域中提供了相同的功能，但它还在多个服务器上扩展了该功能。 连接到服务器场上托管的服务时，如网络负载平衡，支持相互身份验证的身份验证协议要求服务的所有实例都使用同一主体。

有关帐户的详细信息，请参阅：

-   [Active Directory 帐户](/windows/security/identity-protection/access-control/active-directory-accounts)

-   [Active Directory 安全组](/windows/security/identity-protection/access-control/active-directory-security-groups)

-   [本地帐户](https://technet.microsoft.com/itpro/windows/keep-bastion.local-accounts)

-   [Microsoft 帐户](/windows/security/identity-protection/access-control/microsoft-accounts)

-   [服务帐户](/windows/security/identity-protection/access-control/service-accounts)

-   [特殊标识](/windows/security/identity-protection/access-control/special-identities)

## <a name="delegated-authentication"></a>委托身份验证
若要使用旅游类比，国家/地区可能会向官方政府委托的所有成员颁发相同的访问权限，就像这些委托是众所周知的一样。 此委托允许一个成员操作另一个成员的颁发机构。 在 Windows 中，当网络服务接受来自用户的身份验证请求并假定该用户的标识以便启动到第二个网络服务的新连接时，将进行委派的身份验证。 若要支持委派的身份验证，必须建立前端或第一层服务器（如 web 服务器），这些服务器负责处理客户端身份验证请求以及用于存储信息的后端或 n 层服务器（如大型数据库）。 你可以委派权限，以便为组织中的用户设置委派的身份验证，以减少管理员的管理负载。

通过将服务或计算机建立为受信任的委派，可让服务或计算机完成委托身份验证，接收发出请求的用户的票证，然后访问该用户的信息。 此模型仅将后端服务器上的数据访问限制到那些使用正确的访问控制令牌提供凭据的用户或服务。 此外，它还允许对这些后端资源进行访问审核。 通过要求通过委托给服务器的凭据访问所有数据以代表客户端使用，你可以确保服务器不会泄露，并且你可以获取对存储在其他服务器上的敏感信息的访问权限。 对于设计为在多台计算机上使用单一登录功能的多层应用程序，委派身份验证非常有用。

### <a name="authentication-in-trust-relationships-between-domains"></a>域之间的信任关系中的身份验证
拥有多个域的大多数组织都有权访问位于不同域中的共享资源，就像允许出差旅行到全国不同地区的用户一样。 控制此访问要求一个域中的用户也可以通过身份验证和授权使用另一个域中的资源。 若要在不同域中的客户端和服务器之间提供身份验证和授权功能，两个域之间必须存在信任。 信任是 Active Directory 通信的基本技术，是 Windows Server 网络体系结构的一个有机安全组件。

如果两个域之间存在信任，则每个域的身份验证机制将信任来自其他域的身份验证。 信任帮助提供对资源域中共享资源的受控访问权限（信任域），验证传入的身份验证请求是否来自受信任的颁发机构--受信任的域。 通过这种方式，信任充当桥，只允许验证的身份验证请求在域之间传输。

特定信任通过身份验证请求的方式取决于其配置方式。 信任关系可以是单向的，即提供从受信任域到信任域中资源的访问权限，或通过提供从每个域到其他域中资源的访问权限来实现双向关系。 信任也是不可传递的，在这种情况下，信任关系仅存在于两个信任伙伴域之间，或者是可传递的，在这种情况下，信任会自动扩展到合作伙伴信任的任何其他域。

有关信任如何工作的信息，请参阅 [域和林信任的工作方式](/previous-versions/windows/it-pro/windows-server-2003/cc773178(v=ws.10))。

### <a name="protocol-transition"></a>协议转换
协议转换通过允许应用程序在用户身份验证层支持不同的身份验证机制，并通过在后续应用程序层切换到 Kerberos 协议（如相互身份验证和约束委派）来帮助应用程序设计人员。

有关协议转换的详细信息，请参阅 [Kerberos 协议转换和约束委派](/previous-versions/windows/it-pro/windows-server-2003/cc758097(v=ws.10))。

### <a name="constrained-delegation"></a>约束委派
约束委派使管理员能够通过限制应用程序服务可以代表用户操作的范围来指定和强制实施应用程序信任边界。 你可以指定特定服务，通过这些服务，可委托的计算机可以请求资源。 限制服务的授权权限的灵活性有助于通过减少不受信任的服务的泄露机会来改善应用程序安全设计。

有关约束委派的详细信息，请参阅 [Kerberos 约束委派概述](../kerberos/kerberos-constrained-delegation-overview.md)。

## <a name="additional-references"></a>其他参考
[Windows 登录和身份验证技术概述](https://technet.microsoft.com/library/dn269029.aspx)