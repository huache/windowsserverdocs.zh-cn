---
title: 查看和配置性能事件和服务数据
description: 服务器管理器
ms.topic: article
ms.assetid: ccd59c35-4dbf-48e7-88a4-c519c00184d1
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 10/16/2017
ms.openlocfilehash: 8489c50c66bdba84078c7e5d75338af3eeeea56f
ms.sourcegitcommit: db2d46842c68813d043738d6523f13d8454fc972
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/10/2020
ms.locfileid: "89627764"
---
# <a name="view-and-configure-performance-event-and-service-data"></a>View and Configure Performance, Event, and Service Data

>适用于：Windows Server（半年频道）、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

本主题介绍如何查看和配置在服务器管理器中为本地和远程服务器显示的事件日志项、性能计数器和服务警报。

事件、服务和性能日志数据显示在 Windows Server 的服务器管理器控制台中的两个位置。

-   在仪表板上，可以单击缩略图的 " **事件**"、" **性能**" 和 " **服务** " 行，以配置要查看的有关角色、整个服务器管理器服务器池、用户创建的服务器组和本地服务器的事件、性能和服务日志数据。 单击超文本行可打开 " **详细信息视图** " 对话框，你可以在仪表板中指定要向你发出警报的数据。 配置要在仪表板缩略图中突出显示的事件、服务和性能日志数据后，" **详细信息视图** " 对话框的底部会列出与指定的条件匹配的日志条目。

-   “事件”****、“服务”**** 和“性能”**** 图块是角色和组主页的组成部分。 这些图块的“任务”**** 菜单上的命令让你可以指定要从托管服务器收集的数据。 这些磁贴包含筛选器和查询，如果需要，可以进一步限制磁贴中显示的日志条目。

本主题包含以下各节：

-   [什么是缩略图？](#BKMK_thumb)

-   [查看和配置事件](#BKMK_events)

-   [查看和配置性能计数器](#BKMK_perf)

-   [管理服务和配置服务警报](#BKMK_services)

-   [查看和复制事件或性能条目](#BKMK_copy)

## <a name="what-are-thumbnails"></a><a name=BKMK_thumb></a>什么是缩略图？
*缩略图* 显示在每个角色的 "服务器管理器" 仪表板中 (角色的缩略图反映收集的有关运行角色的服务器管理器池中的所有服务器的数据) 、对于每个服务器组、" **所有服务器** " 组 ("所有服务器" 组中的所有服务器服务器管理器和本地服务器。 服务器管理器从托管服务器获取数据后，会自动为在服务器池中的服务器上运行的角色创建缩略图。

如果服务器管理器控制台作为远程服务器管理工具的一部分在客户端计算机上运行，则没有 **本地服务器** 缩略图。

缩略图可让你快速查看角色、服务器和服务器组的状态和可管理性。 当事件、性能计数器、最佳做法分析器结果、服务或常规可管理性问题满足你在通过单击缩略图行打开的 " **详细信息视图** " 对话框中配置的条件时，缩略图标题行将更改颜色 (和突出显示的数字显示在左边距) 。 下表描述了缩略图中显示的数据。

|缩略图行|说明|
|---------|--------|
|可管理性|服务器的可管理性包括多个度量值：服务器是联机还是脱机，无论是可访问还是将数据报告给服务器管理器，登录到本地计算机的用户是否具有足够的用户权限来访问或管理远程服务器，无论远程服务器是否运行远程管理所需的所有软件，或者是否配置了服务器，使其能够通过使用服务器管理器进行查询和管理。 服务器管理器可以从运行 Windows Server 2003 的服务器收集的可管理性数据只有服务器是联机还是脱机。 有关可管理性状态错误以及如何解决这些错误的详细信息，请参阅 [服务器管理器论坛](/answers/topics/windows-server-manager.html)。|
|事件|你可以将缩略图的“事件”**** 行配置为在所记录的事件与你指定的严重性级别、源、时间段、服务器或事件 ID 相匹配时显示警报。 查看有关事件的详细信息，并更改要查看的警报，方法是单击 " **事件** " 行并打开角色或服务器组的 " **事件详细信息视图** " 对话框。|
|服务|你可以将 " **服务** " 行配置为在角色或服务器组中找到的服务与你在 " **服务详细信息视图** " 对话框中指定的启动类型、服务状态、服务名称和服务器相匹配时显示警报。<p>将服务器添加到服务器管理器服务器池之后，如果没有用户登录到托管服务器，则可能会显示有关 Shell 硬件检测服务的服务警报。 它的发生是由于 Shell 硬件检测服务只在用户登录到托管的服务器上，或连接到托管服务器的“远程桌面”会话才运行。 为了避免在这种情况下看到 Shell 硬件检测服务警报，请单击服务器组缩略图中的 **“服务”**，包括 **“所有服务器”** 组中的。 在 " **服务详细信息视图** " 对话框中的 " **服务** " 下拉列表中，清除 **Shell 硬件检测**的复选框，然后单击 **"确定"**。|
|性能|当出现与在 "**性能详细信息视图**" 对话框中指定的资源类型、服务器或时间段相匹配的性能警报时，可以将 "**性能**" 行配置为显示角色或服务器组的警报。<p>性能计数器是默认关闭的。 运行的操作系统版本低于 Windows Server 2003 的托管服务器，但性能计数器尚未启动，通常在角色或组页的 "**服务器**" 磁贴中显示 "**未启动联机性能计数器**" 的可管理性状态错误。 若要为托管服务器打开性能计数器，请在 "**所有服务器**" 页上右键单击 "**性能**" 磁贴中显示 "**关闭****计数器状态**" 值的条目，然后单击 "**启动性能计数器**"。 还可以通过右键单击角色或组页的 " **服务器** " 磁贴中服务器的条目，然后单击 " **启动性能计数器**" 启动性能计数器。|
|BPA 结果|你可以将 " **bpa 结果** " 行配置为在发现 bpa 扫描结果与你在 " **BPA 结果详细信息视图** " 对话框中指定的严重性级别、服务器或 bpa 类别相匹配时显示角色或服务器组的警报。|

## <a name="view-and-configure-events"></a><a name=BKMK_events></a>查看和配置事件
本部分介绍如何配置从服务器管理器服务器池中的服务器收集的事件日志数据，以及要在缩略图中突出显示的事件。

> [!NOTE]
> 在缩略图中向你发出警报的事件是你指示服务器管理器从托管服务器收集的事件总数的子集。 尽管在 "**事件**" 图块的 "**配置事件数据**" 对话框中更改事件条件可更改你在 "服务器管理器" 仪表板上看到的警报数，但在缩略图中更改事件警报条件不影响从托管服务器收集的事件日志数据。

#### <a name="to-configure-the-events-collected-from-managed-servers"></a>配置从托管服务器收集的事件的步骤

1.  在服务器管理器控制台中，打开除仪表板之外的任何页面。 你可以在角色、服务器组或本地服务器页面上的“事件”**** 图块中，配置要从托管服务器收集的事件。

2.  在“事件”**** 图块的“任务”**** 菜单中，单击“配置事件数据”****。

3.  选择要从所选组中的服务器收集的事件严重性级别。 默认情况下，选择“关键”****、“错误”**** 和“警告”**** 严重性级别。

4.  指定事件发生的时间段。 事件的默认时间段为 24 小时。

5.  选择要从中收集事件的事件日志文件。 默认值为“应用程序”****、“设置”**** 和“系统”****。

6.  若要保存你所做的更改，请单击“确定”****，以关闭“配置事件数据”**** 对话框。 保存你所做的更改后，事件数据将自动刷新。

#### <a name="to-configure-the-events-highlighted-in-thumbnails"></a>配置在缩略图中突出显示的事件的步骤

1.  如果服务器管理器已打开，请继续执行下一步。 如果服务器管理器尚未打开，请执行以下任一操作打开它。

    -   在 Windows 桌面上，启动服务器管理器，方法是单击 Windows 任务栏中的“服务器管理器”  。

    -   在 Windows 的 " **开始** " 屏幕上，单击 "服务器管理器" 磁贴。

2.  在仪表板页面上，在“角色和服务器组”**** 图块的缩略图中，单击“事件”**** 行。

3.  在 " **事件详细信息视图** " 对话框中，将严重性级别添加到要显示的事件中。 默认情况下，缩略图仅显示突出显示关键事件的警报。 请注意，在添加要向你发出警报的严重性级别时，" **详细信息视图** " 对话框中显示的事件数将增加。

4.  在“事件来源”**** 字段中，选择要向你发出警报的事件来源。 默认值是 **All**。

5.  如果此缩略图用于安装在多个服务器或一组多台服务器上的角色，则可以在 " **服务器** " 下拉列表中选择你想要事件警报的服务器。

6.  在 " **时间段** " 字段中，指定最长为1440分钟、24小时或1天的时间段。

7.  在“事件 ID”**** 字段中，键入要向你发出警报的特定事件的事件 ID 号。 你可以键入一个事件 Id 范围，通过短划线 (**-**) 分隔，并通过在要排除的事件 id 或事件 id 范围之前键入短划线，从该范围中排除事件 id。 例如，值 **1,3,5-99,-76** 表示为事件 ID 1 和 3 以及 ID 在 5 和 99 之间但不包括事件 ID 76 的所有事件引发警报。

8.  更改警报显示的条件，则显示在对话框底部结果窗格中的事件警报数可能会更改。 选择列表中的条目，并单击 " **隐藏警报** "，以防止它们影响源缩略图中显示的警报计数。 按住 **Ctrl** 并选择警报，以一次选择多个警报。 你可以对匹配事件警报条件但无须查看的警报如此做。

9. 单击“全部显示”**** 以将隐藏的警报返回给列表。

10. 单击 **"确定"** 以保存所做的更改，关闭 " **详细信息视图** " 对话框，并在源缩略图中查看事件警报更改。

## <a name="view-and-configure-performance-log-data"></a><a name=BKMK_perf></a>查看和配置性能日志数据
本部分介绍如何配置从服务器管理器服务器池中的服务器收集的性能日志数据，以及要在缩略图中突出显示的性能计数器警报。

性能计数器是默认关闭的。 运行的操作系统版本低于 Windows Server 2003 的托管服务器，但性能计数器尚未启动，通常在角色或组页的 "**服务器**" 磁贴中显示 "**未启动联机性能计数器**" 的可管理性状态错误。 若要为托管服务器打开性能计数器，请在 "**所有服务器**" 页上右键单击 "**性能**" 磁贴中显示 "**关闭****计数器状态**" 值的条目，然后单击 "**启动性能计数器**"。 还可以通过右键单击角色或组页的 " **服务器** " 磁贴中服务器的条目，然后单击 " **启动性能计数器**" 启动性能计数器。

> [!NOTE]
> 缩略图中查看的性能警报是您指示服务器管理器从托管服务器收集的性能计数器数据总数的子集。 尽管在 "**性能**" 图块的 "**配置性能警报**" 对话框中更改性能警报条件可更改你在 "服务器管理器" 仪表板上看到的警报数，但在缩略图中更改性能警报条件不会影响从托管服务器收集的性能日志数据。
>
> 因此，你可以在缩略图中显示的性能数据的最长时间不能大于在“配置性能警报”**** 对话框中配置的最大图形显示时间。 例如，如果 "**配置性能警报**" 中的 "**图形显示时间**" 值为**1 天**，则从服务器管理器仪表板打开的 "**性能详细信息视图**" 对话框中 "**时间段**" 字段的最大值可以是**1 天**、 **24 小时**或**1440 分钟**。

#### <a name="to-configure-the-performance-log-data-collected-from-managed-servers"></a>配置从托管服务器收集的性能日志数据的步骤

1.  在服务器管理器控制台中，打开除仪表板之外的任何页面。 你可以在角色、服务器组或本地服务器页面上的“性能”**** 图块中，配置要从托管服务器收集的性能数据。

2.  若要从托管服务器收集性能日志数据，必须打开性能计数器。 如果关闭性能计数器，请右键单击 " **性能** " 图块列表中的条目，然后单击 " **启动性能计数器**"。 性能计数器数据收集可能需要一些时间，具体取决于要从其中收集数据的服务器数和可用网络带宽。 在“计数器状态”**** 列中查看状态。

3.  在“性能”**** 图块的“任务”**** 菜单中，单击“配置性能警报”****。

4.  对于所选组中的服务器或运行所选角色的服务器，指定要服务器管理器收集的性能计数器警报的 CPU 使用率百分比。 默认为 85%。

5.  请指定在收集性能计数器警报之前服务器必须具有的剩余可用内存（以 MB 计）。 默认值为 2 MB。

6.  在选定页面的“性能”**** 图块中指定以图形方式针对资源“CPU 使用率”**** 和“可用内存”**** 显示的时间段。 默认时间段为一天。 单击“ **保存**”。

    请注意，在单击“保存”**** 后，可更改“性能”**** 图块中的性能警报数以及图形显示的随时间推移的警报映射。

    > [!NOTE]
    > 对于开启了 [动态内存](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/ff817651(v=ws.10)) 的虚拟机，增加性能警报阈值可能会导致误报警报。

7.  若要刷新从服务器收集的性能警报列表，请在“任务”**** 菜单上单击“刷新”****。

#### <a name="to-configure-the-performance-alerts-highlighted-in-thumbnails"></a>配置在缩略图中突出显示的性能警报的步骤

1.  在仪表板页面上，在“角色和服务器组”**** 图块的缩略图中，单击“性能”**** 行。

2.  在 " **性能详细信息视图** " 对话框中，在 " **资源类型** " 字段中选择或清除要向你发出警报的资源性能阈值的复选框。 请注意，在添加要向你发出警报的资源性能阈值时，" **详细信息视图** " 对话框中显示的性能警报数可能会增加。

3.  如果此缩略图用于安装在多个服务器或一组多台服务器上的角色，则可以在 " **服务器** " 下拉列表中选择你想要性能警报的服务器。

4.  在 " **时间段** " 字段中，指定最长为1440分钟、24小时或1天的时间段。

5.  更改警报显示的条件，则显示在对话框底部结果窗格中的警报数可能会更改。 单击“隐藏警报”**** 以隐藏比当前时间早的所有警报，并防止影响来源缩略图中显示的警报计数。

6.  单击“全部显示”**** 以将隐藏的警报返回给列表。

7.  单击 **"确定"** 以保存所做的更改，关闭 " **详细信息视图** " 对话框，并在源缩略图中查看性能警报更改。

#### <a name="to-view-the-properties-of-performance-alerts"></a>查看性能警报属性的步骤

1.  执行下列操作之一：

    -   在仪表板页面上，在“角色和服务器组”**** 图块的缩略图中，单击“性能”**** 行。

    -   打开角色或组主页，并找到角色或组的“性能”**** 图块。

2.  双击列表中的某个性能警报以查看其属性。 或者，可以右键单击性能警报，再单击“查看属性”****。

3.  在“性能警报属性”**** 对话框中，选择日志项以在“进程”**** 区域中查看与该项关联的进程相关信息。

4.  查看完性能警报属性后，关闭该对话框。

### <a name="analyze-performance-data-and-solve-problems"></a>分析性能数据并解决问题
有关分析在服务器管理器中查看的性能计数器数据和解决托管服务器上的性能问题的详细信息，请参阅以下资源。

-   [分析性能数据](https://go.microsoft.com/fwlink/?LinkId=239829)

-   [解决性能问题](https://go.microsoft.com/fwlink/?LinkId=239831)

有关适用于 windows Server 2012 及更高版本 Windows Server （包括服务器性能审查程序3.0）的高级性能监视和分析工具的详细信息，请参阅 MSDN 上的 [性能](/previous-versions/windows/hardware/design/dn614608(v=vs.85)) 。

## <a name="manage-services-and-configure-service-alerts"></a><a name=BKMK_services></a>管理服务和配置服务警报
本部分介绍如何启动、停止、重新启动、暂停或恢复在服务器管理器中的角色和服务器组页面上的 " **服务** " 图块中显示的服务。 你还可以在服务器管理器仪表板上的缩略图中配置要向你发出警报的服务。

> [!NOTE]
> 无法在服务器管理器的 "服务" 图块中更改服务的启动类型、服务依赖项、恢复选项或其他服务属性。 若要更改服务状态之外的服务属性，请打开“服务”**** 管理单元。 服务器管理器中的 "**工具**" 菜单上提供了用于打开 "**服务**" 管理单元的快捷方式。

#### <a name="to-start-stop-restart-pause-or-resume-a-service"></a>启动、停止、重新启动、暂停或恢复服务的步骤

1.  在服务器管理器控制台中，打开除仪表板之外的任何页面 (换言之，任何角色或组主页) 。

2.  在角色或组的“服务”**** 图块中，右键单击某个服务。

3.  在上下文菜单中，单击要对服务执行的操作。 如果服务处于停止状态，则唯一可以执行的操作是启动服务。 同样地，如果服务处于暂停状态，则唯一可以执行的操作是恢复服务。

4.  请注意，启动、停止、重新启动、暂停或恢复服务时，服务的“状态”**** 列值将在“服务”**** 图块中更改。

#### <a name="to-configure-service-alerts-highlighted-in-thumbnails"></a>配置在缩略图中突出显示的服务警报的步骤

1.  在仪表板页面上，在“角色和服务器组”**** 图块的缩略图中，单击“服务”**** 行。

2.  在 " **服务详细信息视图** " 对话框中，选择要向你发出警报的服务的启动类型。 默认情况下， **自动 (延迟启动) ** 并选择 **自动** 。

3.  选择要向你发出警报的服务状态。 默认情况下，选择“全部”****。

4.  选择要向你发出警报的服务。 默认情况下，选择“全部”****。

5.  选择与你要接收服务警报的角色或组关联的服务器。 默认情况下，选择“全部”****。

6.  更改警报显示的条件，则显示在对话框底部结果窗格中的警报数可能会更改。 单击“隐藏警报”**** 以隐藏比当前时间早的所有警报，并防止影响来源缩略图中显示的警报计数。

7.  单击“全部显示”**** 以将隐藏的警报返回给列表。

8.  单击 **"确定"** 以保存所做的更改，关闭 " **详细信息视图** " 对话框，并在源缩略图中查看服务警报更改。

## <a name="view-and-copy-event-service-or-performance-entries"></a><a name=BKMK_copy></a>查看和复制事件、服务或性能条目
你可以在角色或组的 " **详细信息视图** " 对话框以及 " **事件** " 和 " **性能** " 图块中复制事件、服务或性能项属性。 右键单击事件或性能条目，然后单击 " **复制**"。

“事件”**** 图块还让你可以预览图块底部的事件属性，方法是在列表中选择事件。 若要复制预览中显示的属性，请右键单击预览窗格，然后单击 " **复制**"。

## <a name="see-also"></a>另请参阅
[服务器管理器](server-manager.md) 
[筛选、排序和查询服务器管理器磁贴中的数据](filter-sort-and-query-data-in-server-manager-tiles.md)