---
title: set
description: Set 的参考文章，其中显示、设置或删除 cmd.exe 环境变量。
ms.topic: reference
ms.assetid: 5fdd60d6-addf-4574-8c92-8aa53fa73d76
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 10/16/2017
ms.openlocfilehash: 70ce8bf85bbafc68e4ffe09170d9e21738315560
ms.sourcegitcommit: db2d46842c68813d043738d6523f13d8454fc972
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/10/2020
ms.locfileid: "89639488"
---
# <a name="set"></a>set

显示、设置或删除 cmd.exe 环境变量。 如果不使用参数，则 **set 将** 显示当前环境变量设置。

## <a name="syntax"></a>语法

```
set [<Variable>=[<String>]]
set [/p] <Variable>=[<PromptString>]
set /a <Variable>=<Expression>
```

### <a name="parameters"></a>参数

|参数|说明|
|---------|-----------|
|\<Variable>|指定要设置或修改的环境变量。|
|\<String>|指定与指定的环境变量关联的字符串。|
|/p|将 *变量* 的值设置为用户输入的输入行。|
|\<PromptString>|可选。 指定提示用户输入的消息。 此参数与 **/p** 命令行选项一起使用。|
|/a|将 *字符串* 设置为计算所得的数值表达式。|
|\<Expression>|指定数值表达式。 有关可在 *表达式*中使用的有效运算符，请参阅备注。|
|/?|在命令提示符下显示帮助。|

## <a name="remarks"></a>备注

- 使用启用了命令扩展的**set**

  当启用命令扩展时 (默认) 并使用值来运行 **设置** ，它将显示以该值开头的所有变量。
- 使用特殊字符

  字符 **<** （、、） **>** **|** **&** **^** 是特殊的命令行界面字符，它们前面必须是转义字符， (**^**) 或用 (引号括起来（例如， *String* **StringContaining&符号**) 。 如果使用引号将包含某个特殊字符的字符串引起来，则引号将设置为环境变量值的一部分。
- 使用环境变量

  使用环境变量控制某些批处理文件和程序的行为，并控制 Windows 和 MS-DOS 子系统的显示和工作方式。 **Set**命令通常在 autoexec.bat 文件中用于设置环境变量。
- 显示当前环境设置

  单独键入 **set** 命令时，将显示当前的环境设置。 这些设置通常包括 COMSPEC 和 PATH 环境变量，这些变量用于帮助查找磁盘上的程序。 Windows 使用的其他两个环境变量是 PROMPT 和 DIRCMD。
- 使用参数

  当指定 *变量* 和 *字符串*的值时，会将指定的 *变量* 值添加到环境中，并将 *字符串* 与该变量关联。 如果环境中已经存在该变量，则新的字符串值将替换旧的字符串值。

  如果仅指定了一个变量，并且为**set**命令指定了不包含*String*) 的等号 (，则将清除与该变量关联的*字符串*值 (，就像该变量不在) 中一样。
- 使用 **/a**

  下表按优先顺序列出了 **/a** 支持的运算符。

  |        运算符         | 执行的操作  |
  |-------------------------|----------------------|
  |           ( )           |       分组       |
  |          ! ~ -          |        一元         |
  |         \* / %          |      算术      |
  |           + -           |      算术      |
  |          << >>          |    逻辑移位     |
  |            &            |     位与      |
  |            ^            | 位异或 |
  |                         |                      |
  | = \*=/=% = + =-= &= ^ = |      = <<= >>=       |
  |            ,            | 表达式分隔符 |

  如果你使用逻辑 (**&&** 或者 **||**) 或取模 (**%**) 运算符，请将表达式字符串用引号引起来。 表达式中的任何非数值字符串都被视为环境变量名称，它们的值在处理前转换为数字。 如果指定未在当前环境中定义的环境变量名称，则会分配零值，从而使你可以使用环境变量值执行算术运算，而无需使用% 来检索值。

  如果从命令脚本之外的命令行运行 **set/a** ，将显示表达式的最终值。

  数值是十进制数字，除非以0×作为十六进制数字，以0作为八进制数的值。 因此，0×12等效于18，这与022相同。
- 支持延迟的环境变量扩展

  延迟环境变量扩展支持默认情况下处于禁用状态，但你可以使用 **cmd/v**启用或禁用该功能。
- 使用命令扩展

  启用命令扩展后 (默认) 并单独运行 " **设置** "，则会显示所有当前环境变量。 如果使用值运行 **set** ，则会显示与该值匹配的变量。
- 在批处理文件中使用**set**

  创建批处理文件时，您可以使用 **设置** 来创建变量，然后使用与使用编号变量 **%0** 到 **%9**相同的方式来使用它们。 你还可以使用变量 **%0** 到 **%9** 作为 **集**的输入。
- 从批处理文件调用 **set** 变量

  从批处理文件中调用变量值时，将值括在百分号 (**%**) 。 例如，如果批处理程序创建名为波特的环境变量，则可通过在命令提示符下键入 **% 波特%** ，将与波特关联的字符串用作可替换参数。
- 在恢复控制台中使用**set**

  可从恢复控制台获取带有不同参数的 **set** 命令。

## <a name="examples"></a>示例

若要设置名为 TEST ^ 1 的环境变量，请键入：
```
set testVar=test^^1
```

> [!NOTE]
> **Set**命令将后面的等号 (=) 的所有内容分配给该变量的值。 如果键入：
> ```
> set testVar=test^1
> ```
> 将得到以下结果：
> ```
> testVar=test^1
> ```
> 若要设置名为 TEST&1 的环境变量，请键入：
> ```
> set testVar=test^&1
> ```
> 若要设置名为 INCLUDE 的环境变量，以便 (驱动器 C) 上的 \Inc 目录中的字符串 C:\Inc，请键入：
> ```
> set include=c:\inc
> ```
> 然后，可以在批处理文件中使用字符串 C:\Inc，方法是使用百分号 () 来括起名称 **%** 。 例如，你可以在批处理文件中包含以下命令，以便显示与 INCLUDE 环境变量关联的目录的内容：
> ```
> dir %include%
> ```
> 处理此命令时，字符串 C:\Inc 将替换 **% include%**。

你还可以在将新目录添加到 PATH 环境变量的批处理程序中使用 **set** 。 例如：
```
@echo off
rem ADDPATH.BAT adds a new directory
rem to the path environment variable.
set path=%1;%path%
set
```
若要显示以字母 P 开头的所有环境变量的列表，请键入：
```
set p
```

> [!NOTE]
> 此命令需要命令扩展，这些扩展在默认情况下是启用的。

## <a name="additional-references"></a>其他参考

- [命令行语法项](command-line-syntax-key.md)