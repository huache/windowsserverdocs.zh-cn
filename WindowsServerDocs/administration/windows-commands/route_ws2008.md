---
title: route
description: 路由命令的参考文章，用于修改和显示本地 IP 路由表中的条目。
ms.topic: reference
ms.assetid: afcd666c-0cef-47c2-9bcc-02d202b983b3
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: a15e9190ac135a49cfacfd259a7058765cafa8a4
ms.sourcegitcommit: 96d46c702e7a9c3a321bbbb5284f73911c7baa3c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/27/2020
ms.locfileid: "89033755"
---
# <a name="route"></a>route

> 适用于： Windows Server (半年通道) ，Windows Server 2019，Windows Server 2016，Windows Server 2012 R2，Windows Server 2012

显示和修改本地 IP 路由表中的条目。 如果在没有参数的情况下使用，则 **路由** 将在命令提示符下显示帮助。

> [!IMPORTANT]
> 仅当在 "网络连接" 中网络适配器的属性中将 "Internet 协议" (TCP/IP) 协议安装为组件时，此命令才可用。

## <a name="syntax"></a>语法

```
route [/f] [/p] [<command> [<destination>] [mask <netmask>] [<gateway>] [metric <metric>]] [if <interface>]]
```

### <a name="parameters"></a>参数

| 参数 | 说明 |
|--|--|
| /f | 清除所有条目的路由表，该路由表中的所有条目都不是 (路由，其网络掩码为 255.255.255.255) ，环回网络路由 (路由，目标为127.0.0.0，子网掩码为 255.0.0.0) ，或多播路由 (路由的目标为224.0.0.0，子网掩码为 240.0.0.0) 。 如果将此与某个命令 (如 add、change 或 delete) 一起使用，则在运行该命令之前将清除该表。 |
| /p | 与 add 命令一起使用时，会将指定的路由添加到注册表中，并在每次启动 TCP/IP 协议时用于初始化 IP 路由表。 默认情况下，启动 TCP/IP 协议后，不会保留已添加的路由。 与 print 命令一起使用时，将显示持久路由的列表。 对于所有其他命令，将忽略此参数。 持久性路由存储 **HKEY_LOCAL_MACHINE \system\currentcontrolset\services\tcpip\parameters\persistentroutes**的注册表位置。 |
| `<command>` | 指定要运行的命令。 有效的命令包括：<ul><li>**添加** -添加路由。</li><li>**更改** -修改现有路由。</li><li>**删除：** -删除一个或一路由。</li><li>**打印** -打印路线或路线。</li></ul> |
| `<destination>` | 指定路由的网络目标。 目标可以是 IP 网络地址 (其中，网络地址的主机位设置为 0) ，主机路由的 IP 地址，对于默认路由，则为0.0.0.0。 |
| 掩盖 `<netmask>` | 指定路由的网络目标。 目标可以是 IP 网络地址 (其中，网络地址的主机位设置为 0) ，主机路由的 IP 地址，对于默认路由，则为0.0.0.0。 |
| `<gateway>` | 指定 "转发" 或 "下一跃点" IP 地址，通过该地址可以访问网络目标和子网掩码定义的地址集。 对于本地附加的子网路由，网关地址为分配给连接到子网的接口的 IP 地址。 对于在一个或多个路由器上可用的远程路由，网关地址是可直接访问的 IP 地址，分配给邻居路由器。 |
| 跃 `<metric>` | 指定路由的整数成本度量值（从 1 到 9999），用于在路由表中的多个路由(这些路由最接近匹配要转发的数据包目标地址）间进行选择。 将选择最低度量值的路由。 度量值可以反映跃点数目、路径速度、路径可靠性、路径吞吐量或管理属性。 |
| 如果 `<interface>` | 指定访问目标所使用的接口的接口索引。 有关接口及其对应的接口索引的列表，请使用路由打印命令的显示功能。 可以对接口索引使用十进制或十六进制值。 十六进制数以 0x 开头。 省略 if 参数时，接口将通过网关地址确定。 |
| /? | 在命令提示符下显示帮助。 |

#### <a name="remarks"></a>注解

- 路由表的 " **指标** " 列中的大值是允许 tcp/ip 根据每个 LAN 接口的 IP 地址、子网掩码和默认网关的配置，自动确定路由表中的路由指标的结果。 默认情况下，自动确定接口指标，可确定每个接口的速度，并调整每个接口的路由指标，以便最快的接口创建指标最低的路由。 若要删除大指标，请从每个 LAN 连接的 TCP/IP 协议的高级属性中禁用接口跃点的自动确定。

- 如果文件夹中存储的本地*网络*文件中存在适当的条目，则可以将名称用于*目标* `systemroot\System32\Drivers\\` 。 名称可用于 *网关* ，只要可通过标准主机名解析技术（例如域名系统）将其解析为 IP 地址，例如域名系统 (DNS) 查询、使用存储在该文件夹中的本地 Hosts 文件以及 `systemroot\system32\drivers\\` NetBIOS 名称解析。

- 如果命令是 **打印** 或 **删除**，则可以省略 *网关* 参数，并可以将通配符用于目标和网关。 *目标*值可以是由星号指定的通配符值 `(*)` 。 如果指定的目标包含星号 `(*)` 或问号 (？ ) ，则将其视为通配符，并且仅打印或删除匹配的目标路由。 星号匹配任何字符串，问号匹配任何单个字符。 例如，、 `10.\*.1, 192.168.\*` `127.\*` 和 `\*224\*` 都是星号通配符的有效使用。

- 使用不受支持的目标和子网掩码组合 (网络掩码) 值显示 "路由：错误的网关地址网络掩码" 错误消息。 当目标中的一个或多个位设置为1时，如果将相应的子网掩码位设置为0，则会出现此错误消息。 若要测试此条件，请使用二进制表示法表示目标和子网掩码。 二进制表示法中的子网掩码包含一系列1位，表示目标的网络地址部分，后者表示目标的主机地址部分。 检查以确定目标中是否有位数设置为1的目标部分（作为 (的子网掩码) 所定义）。

## <a name="examples"></a>示例

若要显示 IP 路由表的全部内容，请键入：

```
route print
```

若要显示以10开头的 IP 路由表中的路由，请键入：

```
route print 10.*
```

若要使用默认网关地址192.168.12.1 添加默认路由，请键入：

```
route add 0.0.0.0 mask 0.0.0.0 192.168.12.1
```

若要将路由添加到目标10.41.0.0，子网掩码为255.255.0.0，下一跃点地址为10.27.0.1，请键入：

```
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1
```

若要将永久性路由添加到目标10.41.0.0，子网掩码为255.255.0.0，下一跃点地址为10.27.0.1，请键入：

```
route /p add 10.41.0.0 mask 255.255.0.0 10.27.0.1
```

若要将路由添加到目标10.41.0.0，子网掩码为255.255.0.0，下一跃点地址为10.27.0.1，开销指标为7，请键入：

```
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7
```

若要将路由添加到目标10.41.0.0，子网掩码为255.255.0.0，下一跃点地址为10.27.0.1，并使用接口索引0x3，请键入：

```
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3
```

若要删除目标为10.41.0.0，子网掩码为255.255.0.0 的路由，请键入：

```
route delete 10.41.0.0 mask 255.255.0.0
```

若要删除 IP 路由表中以10开头的所有路由，请键入：

```
route delete 10.*
```

若要将目标为10.41.0.0、子网掩码为255.255.0.0 的路由的下一跃点地址从10.27.0.1 更改为10.27.0.25，请键入：

```
route change 10.41.0.0 mask 255.255.0.0 10.27.0.25
```

## <a name="additional-references"></a>其他参考

- [命令行语法项](command-line-syntax-key.md)
