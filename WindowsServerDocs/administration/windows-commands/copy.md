---
title: copy
description: "\"复制\" 命令的参考主题，它将一个或多个文件从一个位置复制到另一个位置。"
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 9624d4a1-349a-4693-ad00-1d1d4e59e9ac
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 909bcdf83c87440dafe2653711c4d7e215f8d66b
ms.sourcegitcommit: ab64dc83fca28039416c26226815502d0193500c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/01/2020
ms.locfileid: "82719300"
---
# <a name="copy"></a>copy

将一个或多个文件从一个位置复制到另一个位置。

> [!NOTE]
> 你还可以在恢复控制台中使用具有不同参数的**复制**命令。 有关恢复控制台的详细信息，请参阅[Windows 恢复环境（WINDOWS RE）](https://docs.microsoft.com/windows-hardware/manufacture/desktop/windows-recovery-environment--windows-re--technical-reference)。

## <a name="syntax"></a>语法

```
copy [/d] [/v] [/n] [/y | /-y] [/z] [/a | /b] <source> [/a | /b] [+<source> [/a | /b] [+ ...]] [<destination> [/a | /b]]
```

### <a name="parameters"></a>参数

| 参数 | 描述 |
| --------- | ----------- |
| /d | 允许复制的加密文件作为解密文件保存在目标位置。 |
| /v | 验证是否已正确写入新文件。 |
| /n | 当复制名称长度超过8个字符或文件扩展名长度超过三个字符的文件时，使用短文件名（如果可用）。 |
| /y | 禁止提示您确认是否要覆盖现有目标文件。 |
| /-y | 提示您确认是否要覆盖现有的目标文件。 |
| /z | 在可重启模式下复制网络文件。 |
| /a | 指示 ASCII 文本文件。 |
| /b | 指示二进制文件。 |
| `<source>` | 必需。 指定要从中复制文件或文件集的位置。 *源*可以包含驱动器号和冒号、目录名称、文件名或它们的组合。 |
| `<destination>` | 必需。 指定您要将一个或一组文件复制到的位置。 *目标*可以包含驱动器号和冒号、目录名称、文件名或它们的组合。 |
| /? | 在命令提示符下显示帮助。 |

#### <a name="remarks"></a>备注

- 可以复制使用文件尾字符（CTRL + Z）的 ASCII 文本文件，以指示该文件的结尾。

- 如果在命令行上， **/a**位于文件列表之前或之后，则该命令将应用于所有列出的文件，直到**复制**遇到 **/b**为止。 在这种情况下， **/b**适用于位于 **/b**之前的文件。

    **/A**的影响取决于它在命令行字符串中的位置：
      - 如果 **/a**跟在*source*之后，则**copy**命令会将文件视为 ASCII 文件，并复制第一个文件尾字符（CTRL + Z）之前的数据。
      - 如果 **/a**跟在*destination*之后，则**copy**命令会将文件尾字符（CTRL + Z）添加为文件的最后一个字符。

- 如果 **/b**指示命令解释器读取目录中的文件大小指定的字节数，则为。 **/b**是**复制**的默认值，除非**复制**合并了文件。

- 如果命令行中的文件列表之前或之后 **，则将**其应用到所有列出的文件，直到**复制**遇到 **/a**。 在这种情况下， **/a**适用于 **/a**之前的文件。

    **/B**的影响取决于其在命令中的位置-行字符串：-如果 **/b**跟随*source*，则**copy**命令将复制整个文件，包括任何文件尾字符（CTRL + Z）。
        -如果 destination 跟随*destination* **，则 "** **复制**" 命令不会添加文件尾字符（CTRL + Z）。

- 如果无法验证写入操作，将显示一条错误消息。 虽然**copy**命令很少出现记录错误，但你可以使用 **/v**来验证是否已正确记录关键数据。 **/V**命令行选项还会减慢**复制**命令，因为必须检查磁盘上记录的每个扇区。

- 如果在**COPYCMD**环境变量中预设了 **/y** ，可以通过在命令行中使用 **/-y**来重写此设置。 默认情况下，当您替换此设置时，将提示您替换此设置，除非在批处理脚本中执行了**copy**命令。
  
- 若要附加文件，请为*目标*指定单个文件，但为*源*指定多个文件（使用*通配符或*+*file2*+*file3*格式）。

- 如果在复制阶段连接丢失（例如，如果服务器脱机中断连接），则可以使用**copy/z**在重新建立连接后继续。 **/Z**选项还显示为每个文件完成的复制操作的百分比。

- 可以将设备名称替换为*源*或*目标*的一个或多个匹配项。

- 如果*目标*是设备（例如，Com1 或 Lpt1），则 **/b**选项会在二进制模式下将数据复制到设备。 在二进制模式下，**复制/b**将所有字符（包括如 CTRL + C、Ctrl + S、Ctrl + Z 和 ENTER 之类的特殊字符）复制到设备，作为数据。 但是，如果省略 **/b**，则会将数据复制到 ASCII 模式下的设备中。 在 ASCII 模式下，特殊字符可能会导致文件在复制过程中合并。

- 如果不指定目标文件，则将使用与原始文件相同的名称、修改日期和修改时间创建副本。 新副本将存储在当前驱动器上的当前目录中。 如果源文件在当前驱动器上并且当前目录中没有为目标文件指定其他驱动器或目录，则**复制**命令将停止并显示以下错误消息：

    ```
    File cannot be copied onto itself
    0 File(s) copied
    ```

- 如果在 "*源*" 中指定多个文件，则 "**复制**" 命令将使用在 "*目标*" 中指定的文件名将所有文件合并到一个文件中。 **Copy**命令假设合并文件是 ASCII 文件，除非使用 **/b**选项。

- 若要复制长度为0字节的文件，或复制所有目录的文件和子目录，请使用[xcopy 命令](xcopy.md)。

- 若要将当前时间和日期分配到文件而不修改文件，请使用以下语法：  

    ```
    copy /b <source> +,,
    ```

    其中，逗号指示*目标*参数已经被故意省略。

## <a name="examples"></a>示例

若要将名为*memo*的文件复制到当前驱动器中的*letter* ，并确保文件尾字符（CTRL + Z）位于复制文件的末尾，请键入：

```
copy memo.doc letter.doc /a
```

若要将名为*typ*的文件从当前驱动器和目录复制到位于驱动器 C 上名为*鸟瞰*的现有目录，请键入：

```
copy robin.typ c:\birds
```

> [!NOTE]
> 如果*鸟瞰*目录不存在，则将文件*机制*复制到名为 "*鸟*" 的文件中，该文件位于驱动器 C 中磁盘的根目录中。

若要合并位于当前目录中的*Mar89、rpt*、 *Apr89*和*May89*，并将其放在名为*Report*的文件中（也在当前目录中），请键入：

```
copy mar89.rpt + apr89.rpt + may89.rpt Report
```

> [!NOTE]
> 如果将文件合并，则 "**复制**" 命令会将目标文件标记为当前日期和时间。 如果省略 "*目标*"，则会将文件合并并存储在列表中第一个文件的名称下。

若要合并*报表*中的所有文件，当名为 "*报表*" 的文件已存在时，请键入：

```
copy report + mar89.rpt + apr89.rpt + may89.rpt
```

若要将具有 .txt 文件扩展名的当前目录中的所有文件合并到名为 *.doc*的单个文件中，请键入：

```
copy *.txt Combined.doc
```

若要使用通配符将多个二进制文件合并到一个文件中，请包含 **/b**。 这会阻止 Windows 将 CTRL + Z 视为文件尾字符。 例如，键入：

```
copy /b *.exe Combined.exe
```

> [!CAUTION]
> 如果将二进制文件组合在一起，则生成的文件可能无法使用，因为内部格式设置。

- 将具有 .txt 扩展名的每个文件与对应的 ref 文件相结合，可以创建具有相同文件名但扩展名为 .doc 的文件。 "**复制**" 命令将*file1*与*file1*结合起来以形成*file1*，然后，该命令将*file2*与*file2*结合起来以形成*file2*，依此类推。 例如，键入：

```
copy *.txt + *.ref *.doc
```

若要将所有文件与 .txt 扩展名组合在一起，然后将扩展名为. ref 的所有文件合并到一个名为 *.doc*的文件中，请键入：

```
copy *.txt + *.ref Combined.doc
```

## <a name="additional-references"></a>其他参考

- [命令行语法项](command-line-syntax-key.md)

- [xcopy 命令](xcopy.md)
